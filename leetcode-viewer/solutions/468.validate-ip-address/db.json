{"c++":"class Solution {\r\npublic:\r\n    string validIPAddress(string IP) {\r\n        string res[3]={\"IPv4\", \"IPv6\", \"Neither\"};\r\n        stringstream ss(IP);\r\n        string block;\r\n        //IPv4\r\n        if(IP.substr(0,4).find('.')!=string::npos) {\r\n            for(int i=0; i<4; ++i) {\r\n                if(!getline(ss, block, '.') || !isValidIPv4block(block))\r\n                    return res[2];\r\n            }\r\n            return ss.eof()? res[0]: res[2];\r\n        }\r\n        //IPv6\r\n        if(IP.substr(0,5).find(':')!=string::npos) {\r\n            for(int i=0; i<8; ++i) {\r\n                if(!getline(ss, block, ':') || !isValidIPv6block(block))\r\n                    return res[2];\r\n            }\r\n            return ss.eof()? res[1]: res[2];\r\n        }\r\n        \r\n        return res[2];\r\n    }\r\nprivate:\r\n    bool isValidIPv4block(string block) {\r\n        if(block.size()>3 || block.empty()) return false;\r\n        int num=0;\r\n        for(int i=0; i<block.size(); ++i) {\r\n            if(i==0 && block[i]=='0' && block.size()>1) return false;\r\n            if(!isdigit(block[i])) return false;\r\n            num=num*10+block[i]-'0';\r\n        }\r\n        if(num>255) return false;\r\n        return true;\r\n    }\r\n    \r\n    bool isValidIPv6block(string block) {\r\n        if(block.size()>4 || block.empty()) return false;\r\n        \r\n        for(int i=0; i<block.size(); ++i) {\r\n            if(!isalpha(block[i]) && !isdigit(block[i])) return false;\r\n            if(isalpha(block[i]) && tolower(block[i])>'f') return false; \r\n        }\r\n        \r\n        return true;\r\n    }\r\n};"}