{"c++":"class Solution {\r\npublic:\r\n    int findMinStep(string board, string hand) {\r\n        maxstep=6;\r\n        sort(hand.begin(), hand.end());\r\n        int minstep=helper(board, hand);\r\n        return minstep>hand.size()? -1: minstep;\r\n    }\r\nprivate:\r\n    int maxstep;\r\n    int helper(string b, string h) {\r\n        if(b.empty()) return 0;\r\n        if(h.empty()) return maxstep;\r\n        int res=maxstep;\r\n        \r\n        for(int i=0; i<h.size(); ++i) {\r\n            int j=0;\r\n            int n=b.size();\r\n            while(j<n) {\r\n                int k=b.find(h[i], j);\r\n                if(k==string::npos) break;\r\n                if(k<n-1&&b[k]==b[k+1]) {\r\n                    string nextb=shrink(b.substr(0,k)+h[i]+b.substr(k));\r\n                    if(nextb.empty()) return 1;\r\n                    string nexth=h;\r\n                    nexth.erase(i,1);\r\n                    res=min(res, helper(nextb, nexth)+1);\r\n                    k++;\r\n                }\r\n                else if(i<h.size()-1 && h[i]==h[i+1]) {\r\n                    string nextb=shrink(b.substr(0,k)+h[i]+h[i]+b.substr(k));\r\n                    if(nextb.empty()) return 2;\r\n                    string nexth=h;\r\n                    nexth.erase(i,2);\r\n                    res=min(res, helper(nextb, nexth)+2);\r\n                }\r\n                j=k+1;\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n\r\n    string shrink(string s) {/*\r\n        bool done=0;\r\n        \r\n        while(!done) {\r\n            done=1;\r\n            for(int i=0; i<s.size()-2; ++i) {\r\n                if(s[i]==s[i+1]&&s[i]==s[i+2]) {\r\n                    int j=i+3;\r\n                    while(s[i]==s[j]&&j<s.size()) j++;\r\n                    s=s.substr(0,i)+s.substr(j);\r\n                    done=0;\r\n                }\r\n            }    \r\n        }\r\n        return s;*/\r\n         while(s.size() > 0) {\r\n            int start = 0;\r\n            bool done = true;\r\n            for (int i = 0; i <= s.size(); i++) {\r\n                if (i == s.size() || s[i] != s[start]) {\r\n                    if (i - start >= 3) {\r\n                        s = s.substr(0, start) + s.substr(i);\r\n                        done = false;\r\n                        break;\r\n                    }\r\n                    start = i;\r\n                }\r\n            }\r\n            if (done) break;\r\n        }\r\n        return s;\r\n    }\r\n    \r\n};"}