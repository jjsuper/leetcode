{"c++":"class Solution {\r\npublic:\r\n    int numberOfArithmeticSlices(vector<int>& A) {\r\n        //[index, [diff, count]]\r\n        if(A.empty()) return 0;\r\n        vector<unordered_map<int, int>> dp(A.size());\r\n        int res=0;\r\n        \r\n        for(int i=0; i<A.size(); ++i) {\r\n            for(int j=0; j<i; ++j) {\r\n                long diff=(long)A[i]-A[j];\r\n                if(diff>INT_MAX || diff<INT_MIN) continue;\r\n                \r\n                int dif=(int)diff;\r\n                dp[i][dif] += 1;\r\n                if(dp[j].find(dif) != dp[j].end()){\r\n                    dp[i][dif] += dp[j][dif];\r\n                    res += dp[j][dif];\r\n                }\r\n            }\r\n        }\r\n    \r\n        return res;\r\n    }\r\n};"}